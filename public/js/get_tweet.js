function start(t,e,a){const r=io.connect(location.hostname+":"+location.port),n=$("#tweet"),s=$("#tweets"),i=new Audio("/Oztter2_SE.mp3");r.on("init",function(){r.emit("init",{token:t,token_secret:e})});var o=48;r.on("tweet",function(t){function e(e){function a(t,e,a){return Math.random()*(e-t-t)+t}s.append('<div class="tweet" id="'+t.id_str+'" style="top:'+a(r/100*o,r,104)+"px; left:"+a(n/100*o,n,300)+"px; z-index:"+z_count+';"><div class="title_bar">OZtter2 Message - <a href="https://twitter.com/'+t.user.screen_name+'" target="_blank">@'+t.user.screen_name+"</a> "+e+'<button class="close" title="閉じる"><span class="cross"></span></button></div><img class="icon" align="left" src="'+t.user.profile_image_url_https+'"><p class="value">'+function(t){return t.replace(/(https?:\/\/[\x21-\x7e]+)/gi,'<a href="$1" target="_blank">$1</a>').replace(/#(w*[一-龠_ぁ-ん_ァ-ヴーａ-ｚＡ-Ｚa-zA-Z0-9]+|[a-zA-Z0-9_]+|[a-zA-Z0-9_]w*)/g,'<a href="https://twitter.com/search?q=%23$1" target="_blank">#$1</a>').replace(/@(\w+)/g,'<a href="https://twitter.com/$1" target="_blank">@$1</a>').replace(/\r\n?/g,"<br>")}(t.text)+"</p></div>"),i.currentTime=0,i.play()}$tc=s.children(),a<=$tc.length&&$tc.eq(0).remove();var r=window.innerHeight-104,n=window.innerWidth-300;t.retweeted_status?(t.text=t.text.replace(/RT\s@.+:\s/g,""),e(t.is_quote_status?'RT Quote <a href="https://twitter.com/'+t.retweeted_status.user.screen_name+'" target="_blank">@'+t.retweeted_status.user.screen_name+"</a>":'RT <a href="https://twitter.com/'+t.retweeted_status.user.screen_name+'" target="_blank">@'+t.retweeted_status.user.screen_name+"</a>")):e(t.is_quote_status?"Quote":t.in_reply_to_status_id_str?"Reply":""),$("#"+t.id_str).draggable({handle:".title_bar"}),0<o&&o--}),n.on("keydown",function(t){$this=$(this),13===t.keyCode&&""!==$this.val()&&(r.emit("tweet",$this.val()),$this.val(""))}),r.on("delete",function(t){$("#"+t).remove()}),r.on("err",function(t){switch(t){default:console.error(t);break;case"Status Code: 401":window.location.href="/reset";break;case"Status Code: 420":alert("Twitterに接続出来ませんでした\n15分程経ってから再度アクセスしてください")}})}var z_count=0;